[{"path":[]},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement codeofconduct@posit.co. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://themis.tidymodels.org/dev/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to themis","title":"Contributing to themis","text":"outlines propose change themis. detailed info contributing , tidyverse packages, please see development contributing guide.","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to themis","text":"Small typos grammatical errors documentation may edited directly using GitHub web interface, long changes made source file. YES: edit roxygen comment .R file R/. : edit .Rd file man/.","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":"prerequisites","dir":"","previous_headings":"","what":"Prerequisites","title":"Contributing to themis","text":"make substantial pull request, always file issue make sure someone team agrees ’s problem. ’ve found bug, create associated issue illustrate bug minimal reprex.","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"","what":"Pull request process","title":"Contributing to themis","text":"recommend create Git branch pull request (PR). Look Travis AppVeyor build status making changes. README contain badges continuous integration services used package. New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat. Contributions test cases included easier accept. user-facing changes, add bullet top NEWS.md current development version header describing changes made followed GitHub username, links relevant issue(s)/PR(s).","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to themis","text":"Please note themis project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":"https://themis.tidymodels.org/dev/CONTRIBUTING.html","id":"see-tidyverse-development-contributing-guide","dir":"","previous_headings":"","what":"See tidyverse development contributing guide","title":"Contributing to themis","text":"details.","code":""},{"path":"https://themis.tidymodels.org/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 themis authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://themis.tidymodels.org/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Emil Hvitfeldt. Author, maintainer. . Copyright holder, funder.","code":""},{"path":"https://themis.tidymodels.org/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Hvitfeldt E (2025). themis: Extra Recipes Steps Dealing Unbalanced Data. R package version 1.0.3.9000, https://github.com/tidymodels/themis.","code":"@Manual{,   title = {themis: Extra Recipes Steps for Dealing with Unbalanced Data},   author = {Emil Hvitfeldt},   year = {2025},   note = {R package version 1.0.3.9000},   url = {https://github.com/tidymodels/themis}, }"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"themis-","dir":"","previous_headings":"","what":"Extra Recipes Steps for Dealing with Unbalanced Data","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"themis contains extra steps recipes package dealing unbalanced data. name themis ancient Greek god typically depicted balance.","code":""},{"path":"https://themis.tidymodels.org/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"can install released version themis CRAN : Install development version GitHub :","code":"install.packages(\"themis\") # install.packages(\"pak\") pak::pak(\"tidymodels/themis\")"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"Following example using SMOTE algorithm deal unbalanced data","code":"library(recipes) library(modeldata) library(themis)  data(\"credit_data\", package = \"modeldata\")  credit_data0 <- credit_data %>%   filter(!is.na(Job))  count(credit_data0, Job) #>         Job    n #> 1     fixed 2805 #> 2 freelance 1024 #> 3    others  171 #> 4   partime  452  ds_rec <- recipe(Job ~ Time + Age + Expenses, data = credit_data0) %>%   step_impute_mean(all_predictors()) %>%   step_smote(Job, over_ratio = 0.25) %>%   prep()  ds_rec %>%   bake(new_data = NULL) %>%   count(Job) #> # A tibble: 4 × 2 #>   Job           n #>   <fct>     <int> #> 1 fixed      2805 #> 2 freelance  1024 #> 3 others      701 #> 4 partime     701"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"methods","dir":"","previous_headings":"","what":"Methods","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"unbalanced data. Used examples latter.","code":"example_data <- data.frame(class = letters[rep(1:5, 1:5 * 10)],                            x = rnorm(150))  library(ggplot2)  example_data %>%   ggplot(aes(class)) +   geom_bar()"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"upsample--over-sampling","dir":"","previous_headings":"Methods","what":"Upsample / Over-sampling","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"following methods share tuning parameter over_ratio, ratio minority--majority frequencies. setting over_ratio = 1 bring number samples minority classes equal 100% majority class.  setting over_ratio = 0.5 upsample minority class less samples 50% majority 50% majority.","code":"recipe(~., example_data) %>%   step_upsample(class, over_ratio = 1) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(class)) +   geom_bar() recipe(~., example_data) %>%   step_upsample(class, over_ratio = 0.5) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(class)) +   geom_bar()"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"downsample--under-sampling","dir":"","previous_headings":"Methods","what":"Downsample / Under-sampling","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"following methods share tuning parameter under_ratio, ratio majority--minority frequencies. setting under_ratio = 1 bring number samples majority classes equal 100% minority class.  setting under_ratio = 2 downsample majority class 200% samples minority class 200% samples minority.","code":"recipe(~., example_data) %>%   step_downsample(class, under_ratio = 1) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(class)) +   geom_bar() recipe(~., example_data) %>%   step_downsample(class, under_ratio = 2) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(class)) +   geom_bar()"},{"path":"https://themis.tidymodels.org/dev/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Extra Recipes Steps for Dealing with Unbalanced Data","text":"project released Contributor Code Conduct. contributing project, agree abide terms. questions discussions tidymodels packages, modeling, machine learning, join us RStudio Community. think encountered bug, please submit issue. Either way, learn create share reprex (minimal, reproducible example), clearly communicate code. Check details contributing guidelines tidymodels packages get help.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":null,"dir":"Reference","previous_headings":"","what":"Adaptive Synthetic Algorithm — adasyn","title":"Adaptive Synthetic Algorithm — adasyn","text":"Generates synthetic positive instances using ADASYN algorithm.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adaptive Synthetic Algorithm — adasyn","text":"","code":"adasyn(df, var, k = 5, over_ratio = 1)"},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adaptive Synthetic Algorithm — adasyn","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable. k integer. Number nearest neighbor used generate new examples minority class. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adaptive Synthetic Algorithm — adasyn","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Adaptive Synthetic Algorithm — adasyn","text":"columns used function must numeric missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Adaptive Synthetic Algorithm — adasyn","text":"Chawla, N. V., Bowyer, K. W., Hall, L. O., Kegelmeyer, W. P. (2002). Smote: Synthetic minority -sampling technique. Journal Artificial Intelligence Research, 16:321-357.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/adasyn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Adaptive Synthetic Algorithm — adasyn","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- adasyn(circle_numeric, var = \"class\")  res <- adasyn(circle_numeric, var = \"class\", k = 10)  res <- adasyn(circle_numeric, var = \"class\", over_ratio = 0.8)"},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":null,"dir":"Reference","previous_headings":"","what":"borderline-SMOTE Algorithm — bsmote","title":"borderline-SMOTE Algorithm — bsmote","text":"BSMOTE generates generate new examples minority class using nearest neighbors cases border region classes.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"borderline-SMOTE Algorithm — bsmote","text":"","code":"bsmote(df, var, k = 5, over_ratio = 1, all_neighbors = FALSE)"},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"borderline-SMOTE Algorithm — bsmote","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable. k integer. Number nearest neighbor used generate new examples minority class. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. all_neighbors Type two borderline-SMOTE method. Defaults FALSE. See details.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"borderline-SMOTE Algorithm — bsmote","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"borderline-SMOTE Algorithm — bsmote","text":"methods works way smote(), expect instead generating points around every point minority class point first classified boxes \"danger\" \"\". point k nearest neighbors calculated. neighbors comes different class labeled noise put \"\" box. half neighbors comes different class labeled \"danger. all_neighbors = FALSE points generated nearest neighbors class. all_neighbors = TRUE points generated nearest neighbors. See examples visualization. parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. columns used step must numeric missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"borderline-SMOTE Algorithm — bsmote","text":"Hui Han, Wen-Yuan Wang, Bing-Huan Mao. Borderline-smote: new -sampling method imbalanced data sets learning. International Conference Intelligent Computing, pages 878–887. Springer, 2005.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/bsmote.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"borderline-SMOTE Algorithm — bsmote","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- bsmote(circle_numeric, var = \"class\")  res <- bsmote(circle_numeric, var = \"class\", k = 10)  res <- bsmote(circle_numeric, var = \"class\", over_ratio = 0.8)  res <- bsmote(circle_numeric, var = \"class\", all_neighbors = TRUE)"},{"path":"https://themis.tidymodels.org/dev/reference/circle_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Synthetic Dataset With a Circle — circle_example","title":"Synthetic Dataset With a Circle — circle_example","text":"random dataset two classes one inside circle. Used examples show different methods handles borders.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/circle_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Synthetic Dataset With a Circle — circle_example","text":"","code":"circle_example"},{"path":"https://themis.tidymodels.org/dev/reference/circle_example.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Synthetic Dataset With a Circle — circle_example","text":"data frame 200 rows 4 variables: x Numeric. y Numeric. class Factor, values \"Circle\" \"Rest\". id character, ID variable.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Points Near Other Classes — nearmiss","title":"Remove Points Near Other Classes — nearmiss","text":"Generates synthetic positive instances using nearmiss algorithm.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Points Near Other Classes — nearmiss","text":"","code":"nearmiss(df, var, k = 5, under_ratio = 1)"},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Points Near Other Classes — nearmiss","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable. k integer. Number nearest neighbor used generate new examples minority class. under_ratio numeric value ratio majority--minority frequencies. default value (1) means levels sampled frequency least occurring level. value 2 mean majority levels () (approximately) twice many rows minority level.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Points Near Other Classes — nearmiss","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Points Near Other Classes — nearmiss","text":"columns used function must numeric missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Remove Points Near Other Classes — nearmiss","text":"Inderjeet Mani Zhang. knn approach unbalanced data distributions: case study involving information extraction. Proceedings workshop learning imbalanced datasets, 2003.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/nearmiss.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Points Near Other Classes — nearmiss","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- nearmiss(circle_numeric, var = \"class\")  res <- nearmiss(circle_numeric, var = \"class\", k = 10)  res <- nearmiss(circle_numeric, var = \"class\", under_ratio = 1.5)"},{"path":"https://themis.tidymodels.org/dev/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. generics required_pkgs, tidy, tunable","code":""},{"path":"https://themis.tidymodels.org/dev/reference/required_pkgs.step.html","id":null,"dir":"Reference","previous_headings":"","what":"S3 methods for tracking which additional packages are needed for steps. — required_pkgs.step_adasyn","title":"S3 methods for tracking which additional packages are needed for steps. — required_pkgs.step_adasyn","text":"S3 methods tracking additional packages needed steps.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/required_pkgs.step.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"S3 methods for tracking which additional packages are needed for steps. — required_pkgs.step_adasyn","text":"","code":"# S3 method for class 'step_adasyn' required_pkgs(x, ...)  # S3 method for class 'step_bsmote' required_pkgs(x, ...)  # S3 method for class 'step_downsample' required_pkgs(x, ...)  # S3 method for class 'step_nearmiss' required_pkgs(x, ...)  # S3 method for class 'step_rose' required_pkgs(x, ...)  # S3 method for class 'step_smote' required_pkgs(x, ...)  # S3 method for class 'step_smotenc' required_pkgs(x, ...)  # S3 method for class 'step_tomek' required_pkgs(x, ...)  # S3 method for class 'step_upsample' required_pkgs(x, ...)"},{"path":"https://themis.tidymodels.org/dev/reference/required_pkgs.step.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"S3 methods for tracking which additional packages are needed for steps. — required_pkgs.step_adasyn","text":"x recipe step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/required_pkgs.step.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"S3 methods for tracking which additional packages are needed for steps. — required_pkgs.step_adasyn","text":"character vector","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":null,"dir":"Reference","previous_headings":"","what":"SMOTE Algorithm — smote","title":"SMOTE Algorithm — smote","text":"SMOTE generates new examples minority class using nearest neighbors cases.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SMOTE Algorithm — smote","text":"","code":"smote(df, var, k = 5, over_ratio = 1)"},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SMOTE Algorithm — smote","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable. k integer. Number nearest neighbor used generate new examples minority class. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SMOTE Algorithm — smote","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"SMOTE Algorithm — smote","text":"parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. columns used function must numeric missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"SMOTE Algorithm — smote","text":"Chawla, N. V., Bowyer, K. W., Hall, L. O., Kegelmeyer, W. P. (2002). Smote: Synthetic minority -sampling technique. Journal Artificial Intelligence Research, 16:321-357.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/smote.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SMOTE Algorithm — smote","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- smote(circle_numeric, var = \"class\")  res <- smote(circle_numeric, var = \"class\", k = 10)  res <- smote(circle_numeric, var = \"class\", over_ratio = 0.8)"},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":null,"dir":"Reference","previous_headings":"","what":"SMOTENC Algorithm — smotenc","title":"SMOTENC Algorithm — smotenc","text":"SMOTENC generates new examples minority class using nearest neighbors cases, can handle categorical variables","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SMOTENC Algorithm — smotenc","text":"","code":"smotenc(df, var, k = 5, over_ratio = 1)"},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SMOTENC Algorithm — smotenc","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable. k integer. Number nearest neighbor used generate new examples minority class. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SMOTENC Algorithm — smotenc","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"SMOTENC Algorithm — smotenc","text":"parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. Columns can numeric categorical missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"SMOTENC Algorithm — smotenc","text":"Chawla, N. V., Bowyer, K. W., Hall, L. O., Kegelmeyer, W. P. (2002). Smote: Synthetic minority -sampling technique. Journal Artificial Intelligence Research, 16:321-357.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/smotenc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SMOTENC Algorithm — smotenc","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- smotenc(circle_numeric, var = \"class\")  res <- smotenc(circle_numeric, var = \"class\", k = 10)  res <- smotenc(circle_numeric, var = \"class\", over_ratio = 0.8)"},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Adaptive Synthetic Algorithm — step_adasyn","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"step_adasyn() creates specification recipe step generates synthetic positive instances using ADASYN algorithm.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"","code":"step_adasyn(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   over_ratio = 1,   neighbors = 5,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"adasyn\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. neighbors integer. Number nearest neighbor used generate new examples minority class. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed applied. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"columns data sampled returned recipes::juice() recipes::bake(). columns used step must numeric missing data. used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"step 2 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1) neighbors: # Nearest Neighbors (type: integer, default: 5)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":", H., Bai, Y., Garcia, E. Li, S. 2008. ADASYN: Adaptive synthetic sampling approach imbalanced learning. Proceedings IJCNN 2008. (IEEE World Congress Computational Intelligence). IEEE International Joint Conference. pp.1322-1328.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_adasyn.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply Adaptive Synthetic Algorithm — step_adasyn","text":"","code":"library(recipes) library(modeldata) #>  #> Attaching package: ‘modeldata’ #> The following object is masked from ‘package:datasets’: #>  #>     penguins data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the minority levels up to about 1000 each   # 1000/2211 is approx 0.4523   step_adasyn(class, over_ratio = 0.4523) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        2211 #> 2 F         1347 #> 3 M         1000 #> 4 L         1000  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     2211  2211 #> 2 F      1347     1347  1347 #> 3 M       514     1000   514 #> 4 L       259     1000   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without ADASYN\")   recipe(class ~ x + y, data = circle_example) %>%   step_adasyn(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With ADASYN\")"},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply borderline-SMOTE Algorithm — step_bsmote","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"step_bsmote() creates specification recipe step generate new examples minority class using nearest neighbors cases border region classes.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"","code":"step_bsmote(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   over_ratio = 1,   neighbors = 5,   all_neighbors = FALSE,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"bsmote\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. neighbors integer. Number nearest neighbor used generate new examples minority class. all_neighbors Type two borderline-SMOTE method. Defaults FALSE. See details. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed smote-ing. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"methods works way step_smote(), expect instead generating points around every point minority class point first classified boxes \"danger\" \"\". point k nearest neighbors calculated. neighbors comes different class labeled noise put \"\" box. half neighbors comes different class labeled \"danger. all_neighbors = FALSE points generated nearest neighbors class. all_neighbors = TRUE points generated nearest neighbors. See examples visualization. parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. columns data sampled returned recipes::juice() recipes::bake(). columns used step must numeric missing data. used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"step 3 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1) neighbors: # Nearest Neighbors (type: integer, default: 5) all_neighbors: Neighbors (type: logical, default: FALSE)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"Hui Han, Wen-Yuan Wang, Bing-Huan Mao. Borderline-smote: new -sampling method imbalanced data sets learning. International Conference Intelligent Computing, pages 878–887. Springer, 2005.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_bsmote.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply borderline-SMOTE Algorithm — step_bsmote","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the minority levels up to about 1000 each   # 1000/2211 is approx 0.4523   step_bsmote(class, over_ratio = 0.4523) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        2211 #> 2 F         1347 #> 3 M         1000 #> 4 L         1000  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     2211  2211 #> 2 F      1347     1347  1347 #> 3 M       514     1000   514 #> 4 L       259     1000   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without SMOTE\")   recipe(class ~ x + y, data = circle_example) %>%   step_bsmote(class, all_neighbors = FALSE) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With borderline-SMOTE, all_neighbors = FALSE\")   recipe(class ~ x + y, data = circle_example) %>%   step_bsmote(class, all_neighbors = TRUE) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With borderline-SMOTE, all_neighbors = TRUE\")"},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":null,"dir":"Reference","previous_headings":"","what":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"step_downsample() creates specification recipe step remove rows data set make occurrence levels specific factor level equal.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"","code":"step_downsample(   recipe,   ...,   under_ratio = 1,   ratio = deprecated(),   role = NA,   trained = FALSE,   column = NULL,   target = NA,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"downsample\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. under_ratio numeric value ratio majority--minority frequencies. default value (1) means levels sampled frequency least occurring level. value 2 mean majority levels () (approximately) twice many rows minority level. ratio Deprecated argument; under_ratio role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. target integer used subsample. set user populated prep. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed downsampling. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"-sampling intended performed training set alone. reason, default skip = TRUE. missing values factor variable used define sampling, missing data selected random way factor levels sampled. Missing values used determine amount data minority level data factor levels occurring frequency minority level, data retained. columns data sampled returned recipes::juice() recipes::bake(). Keep mind location -sampling step may effects. example, centering scaling, clear whether operations conducted rows removed.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"step 1 tuning parameters: under_ratio: -Sampling Ratio (type: double, default: 1)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"step performs unsupervised operation can utilize case weights. use , see documentation recipes::case_weights examples tidymodels.org.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_downsample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Down-Sample a Data Set Based on a Factor Variable — step_downsample","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the majority levels down to about 1000 each   # 1000/259 is approx 3.862   step_downsample(class, under_ratio = 3.862) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        1000 #> 2 F         1000 #> 3 M          514 #> 4 L          259  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     1000  2211 #> 2 F      1347     1000  1347 #> 3 M       514      514   514 #> 4 L       259      259   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without downsample\")   recipe(class ~ x + y, data = circle_example) %>%   step_downsample(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With downsample\")"},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Points Near Other Classes — step_nearmiss","title":"Remove Points Near Other Classes — step_nearmiss","text":"step_nearmiss() creates specification recipe step removes majority class instances undersampling points majority class based distance points class.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Points Near Other Classes — step_nearmiss","text":"","code":"step_nearmiss(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   under_ratio = 1,   neighbors = 5,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"nearmiss\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Points Near Other Classes — step_nearmiss","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. under_ratio numeric value ratio majority--minority frequencies. default value (1) means levels sampled frequency least occurring level. value 2 mean majority levels () (approximately) twice many rows minority level. neighbors integer. Number nearest neighbor used generate new examples minority class. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed applied. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Points Near Other Classes — step_nearmiss","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Points Near Other Classes — step_nearmiss","text":"method retains points majority class smallest mean distance k nearest points minority class. columns data sampled returned recipes::juice() recipes::bake(). columns used step must numeric missing data. used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Remove Points Near Other Classes — step_nearmiss","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Remove Points Near Other Classes — step_nearmiss","text":"step 2 tuning parameters: under_ratio: -Sampling Ratio (type: double, default: 1) neighbors: # Nearest Neighbors (type: integer, default: 5)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Remove Points Near Other Classes — step_nearmiss","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Remove Points Near Other Classes — step_nearmiss","text":"Inderjeet Mani Zhang. knn approach unbalanced data distributions: case study involving information extraction. Proceedings workshop learning imbalanced datasets, 2003.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_nearmiss.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Points Near Other Classes — step_nearmiss","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the majority levels down to about 1000 each   # 1000/259 is approx 3.862   step_nearmiss(class, under_ratio = 3.862) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        1000 #> 2 F         1000 #> 3 M          514 #> 4 L          259  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     1000  2211 #> 2 F      1347     1000  1347 #> 3 M       514      514   514 #> 4 L       259      259   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without NEARMISS\") +   xlim(c(1, 15)) +   ylim(c(1, 15))   recipe(class ~ x + y, data = circle_example) %>%   step_nearmiss(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With NEARMISS\") +   xlim(c(1, 15)) +   ylim(c(1, 15))"},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply ROSE Algorithm — step_rose","title":"Apply ROSE Algorithm — step_rose","text":"step_rose() creates specification recipe step generates sample synthetic data enlarging features space minority majority class example. Using ROSE::ROSE().","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply ROSE Algorithm — step_rose","text":"","code":"step_rose(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   over_ratio = 1,   minority_prop = 0.5,   minority_smoothness = 1,   majority_smoothness = 1,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"rose\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply ROSE Algorithm — step_rose","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. minority_prop numeric. Determines -sampling minority class. Defaults 0.5. minority_smoothness numeric. Shrink factor multiplied smoothing parameters estimate conditional kernel density minority class. Defaults 1. majority_smoothness numeric. Shrink factor multiplied smoothing parameters estimate conditional kernel density majority class. Defaults 1. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed rose-ing. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply ROSE Algorithm — step_rose","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply ROSE Algorithm — step_rose","text":"factor variable used balance around must 2 levels. ROSE algorithm works selecting observation belonging class k generates new examples  neighborhood determined matrix H_k. Smaller values arguments effect shrinking entries corresponding smoothing matrix H_k, Shrinking cautious choice concern excessively large neighborhoods lead blur boundaries regions feature space associated class. columns data sampled returned recipes::juice() recipes::bake(). used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply ROSE Algorithm — step_rose","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Apply ROSE Algorithm — step_rose","text":"step 1 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Apply ROSE Algorithm — step_rose","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply ROSE Algorithm — step_rose","text":"Lunardon, N., Menardi, G., Torelli, N. (2014). ROSE: Package Binary Imbalanced Learning. R Jorunal, 6:82–92. Menardi, G. Torelli, N. (2014). Training assessing classification rules imbalanced data. Data Mining Knowledge Discovery, 28:92–122.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_rose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply ROSE Algorithm — step_rose","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   mutate(class = factor(class == \"VF\", labels = c(\"not VF\", \"VF\"))) %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 2 × 2 #>   class   orig #>   <fct>  <int> #> 1 not VF  2120 #> 2 VF      2211  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   step_rose(class) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 2 × 2 #>   class  training #>   <fct>     <int> #> 1 not VF     2114 #> 2 VF         2308  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 2 × 2 #>   class  baked #>   <fct>  <int> #> 1 not VF  2120 #> 2 VF      2211  orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 2 × 4 #>   class   orig training baked #>   <fct>  <int>    <int> <int> #> 1 not VF  2120     2114  2120 #> 2 VF      2211     2308  2211  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without ROSE\")   recipe(class ~ x + y, data = circle_example) %>%   step_rose(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With ROSE\")"},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply SMOTE Algorithm — step_smote","title":"Apply SMOTE Algorithm — step_smote","text":"step_smote() creates specification recipe step generate new examples  minority class using nearest neighbors cases.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply SMOTE Algorithm — step_smote","text":"","code":"step_smote(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   over_ratio = 1,   neighbors = 5,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"smote\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply SMOTE Algorithm — step_smote","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. neighbors integer. Number nearest neighbor used generate new examples minority class. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed smote-ing. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply SMOTE Algorithm — step_smote","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply SMOTE Algorithm — step_smote","text":"parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. columns data sampled returned recipes::juice() recipes::bake(). columns used step must numeric missing data. used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply SMOTE Algorithm — step_smote","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Apply SMOTE Algorithm — step_smote","text":"step 2 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1) neighbors: # Nearest Neighbors (type: integer, default: 5)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Apply SMOTE Algorithm — step_smote","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply SMOTE Algorithm — step_smote","text":"Chawla, N. V., Bowyer, K. W., Hall, L. O., Kegelmeyer, W. P. (2002). Smote: Synthetic minority -sampling technique. Journal Artificial Intelligence Research, 16:321-357.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_smote.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply SMOTE Algorithm — step_smote","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the minority levels up to about 1000 each   # 1000/2211 is approx 0.4523   step_smote(class, over_ratio = 0.4523) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        2211 #> 2 F         1347 #> 3 M         1000 #> 4 L         1000  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     2211  2211 #> 2 F      1347     1347  1347 #> 3 M       514     1000   514 #> 4 L       259     1000   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without SMOTE\")   recipe(class ~ x + y, data = circle_example) %>%   step_smote(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With SMOTE\")"},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply SMOTENC algorithm — step_smotenc","title":"Apply SMOTENC algorithm — step_smotenc","text":"step_smotenc() creates specification recipe step generate new examples  minority class using nearest neighbors cases. Gower's distance used handle mixed data types. categorical variables, common category along neighbors chosen.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply SMOTENC algorithm — step_smotenc","text":"","code":"step_smotenc(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   over_ratio = 1,   neighbors = 5,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"smotenc\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply SMOTENC algorithm — step_smotenc","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. neighbors integer. Number nearest neighbor used generate new examples minority class. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed smote-ing. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply SMOTENC algorithm — step_smotenc","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply SMOTENC algorithm — step_smotenc","text":"parameter neighbors controls way new examples created. currently existing minority class example X new examples created (controlled parameter over_ratio mentioned ). examples generated using information neighbors nearest neighbor example minority class. parameter neighbors controls many neighbor used. columns data sampled returned recipes::juice() recipes::bake(). Columns can numeric categorical missing data. used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Apply SMOTENC algorithm — step_smotenc","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Apply SMOTENC algorithm — step_smotenc","text":"step 2 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1) neighbors: # Nearest Neighbors (type: integer, default: 5)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Apply SMOTENC algorithm — step_smotenc","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Apply SMOTENC algorithm — step_smotenc","text":"Chawla, N. V., Bowyer, K. W., Hall, L. O., Kegelmeyer, W. P. (2002). Smote: Synthetic minority -sampling technique. Journal Artificial Intelligence Research, 16:321-357.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_smotenc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply SMOTENC algorithm — step_smotenc","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  orig <- count(hpc_data, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data) %>%   step_impute_knn(all_predictors()) %>%   # Bring the minority levels up to about 1000 each   # 1000/2211 is approx 0.4523   step_smotenc(class, over_ratio = 0.4523) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        2211 #> 2 F         1347 #> 3 M         1000 #> 4 L         1000  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     2211  2211 #> 2 F      1347     1347  1347 #> 3 M       514     1000   514 #> 4 L       259     1000   259"},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Tomek’s Links — step_tomek","title":"Remove Tomek’s Links — step_tomek","text":"step_tomek() creates specification recipe step removes majority class instances tomek links.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Tomek’s Links — step_tomek","text":"","code":"step_tomek(   recipe,   ...,   role = NA,   trained = FALSE,   column = NULL,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"tomek\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Tomek’s Links — step_tomek","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed applied. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Tomek’s Links — step_tomek","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Tomek’s Links — step_tomek","text":"factor variable used balance around must 2 levels. variables must numerics missing data. tomek link defined pair points different classes others nearest neighbors. columns data sampled returned recipes::juice() recipes::bake(). used modeling, users strongly consider using option skip = TRUE extra sampling conducted outside training set.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Remove Tomek’s Links — step_tomek","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Remove Tomek’s Links — step_tomek","text":"underlying operation allow case weights.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Remove Tomek’s Links — step_tomek","text":"Tomek. Two modifications cnn. IEEE Trans. Syst. Man Cybern., 6:769-772, 1976.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_tomek.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Tomek’s Links — step_tomek","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   step_tomek(class) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        1911 #> 2 F         1011 #> 3 M          379 #> 4 L          210  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     1911  2211 #> 2 F      1347     1011  1347 #> 3 M       514      379   514 #> 4 L       259      210   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without Tomek\") +   xlim(c(1, 15)) +   ylim(c(1, 15))   recipe(class ~ x + y, data = circle_example) %>%   step_tomek(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_point() +   labs(title = \"With Tomek\") +   xlim(c(1, 15)) +   ylim(c(1, 15))"},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":null,"dir":"Reference","previous_headings":"","what":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"step_upsample() creates specification recipe step replicate rows data set make occurrence levels specific factor level equal.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"","code":"step_upsample(   recipe,   ...,   over_ratio = 1,   ratio = deprecated(),   role = NA,   trained = FALSE,   column = NULL,   target = NA,   skip = TRUE,   seed = sample.int(10^5, 1),   id = rand_id(\"upsample\") )"},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"recipe recipe object. step added sequence operations recipe. ... One selector functions choose variable used sample data. See recipes::selections details. selection result single factor variable. tidy method, currently used. over_ratio numeric value ratio minority--majority frequencies. default value (1) means levels sampled frequency occurring level. value 0.5 mean minority levels () (approximately) half many rows majority level. ratio Deprecated argument; over_ratio. role used step since new variables created. trained logical indicate quantities preprocessing estimated. column character string variable name populated (eventually) ... selectors. target integer used subsample. set user populated prep. skip logical. step skipped recipe baked bake()? operations baked prep() run, operations may able conducted new data (e.g. processing outcome variable(s)). Care taken using skip = TRUE may affect computations subsequent operations. seed integer used seed upsampling. id character string unique step identify .","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"updated version recipe new step added sequence existing steps (). tidy method, tibble columns terms variable used sample.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"-sampling intended performed training set alone. reason, default skip = TRUE. missing values factor variable used define sampling, missing data selected random way factor levels sampled. Missing values used determine amount data majority level (see example ). data factor levels occurring frequency majority level, data retained. columns data sampled returned recipes::juice() recipes::bake().","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"tidying","dir":"Reference","previous_headings":"","what":"Tidying","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"tidy() step, tibble retruned columns terms id: terms character, selectors variables selected id character, id step","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"tuning-parameters","dir":"Reference","previous_headings":"","what":"Tuning Parameters","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"step 1 tuning parameters: over_ratio: -Sampling Ratio (type: double, default: 1)","code":""},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"case-weights","dir":"Reference","previous_headings":"","what":"Case weights","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"step performs unsupervised operation can utilize case weights. use , see documentation recipes::case_weights examples tidymodels.org.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/step_upsample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Up-Sample a Data Set Based on a Factor Variable — step_upsample","text":"","code":"library(recipes) library(modeldata) data(hpc_data)  hpc_data0 <- hpc_data %>%   select(-protocol, -day)  orig <- count(hpc_data0, class, name = \"orig\") orig #> # A tibble: 4 × 2 #>   class  orig #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  up_rec <- recipe(class ~ ., data = hpc_data0) %>%   # Bring the minority levels up to about 1000 each   # 1000/2211 is approx 0.4523   step_upsample(class, over_ratio = 0.4523) %>%   prep()  training <- up_rec %>%   bake(new_data = NULL) %>%   count(class, name = \"training\") training #> # A tibble: 4 × 2 #>   class training #>   <fct>    <int> #> 1 VF        2211 #> 2 F         1347 #> 3 M         1000 #> 4 L         1000  # Since `skip` defaults to TRUE, baking the step has no effect baked <- up_rec %>%   bake(new_data = hpc_data0) %>%   count(class, name = \"baked\") baked #> # A tibble: 4 × 2 #>   class baked #>   <fct> <int> #> 1 VF     2211 #> 2 F      1347 #> 3 M       514 #> 4 L       259  # Note that if the original data contained more rows than the # target n (= ratio * majority_n), the data are left alone: orig %>%   left_join(training, by = \"class\") %>%   left_join(baked, by = \"class\") #> # A tibble: 4 × 4 #>   class  orig training baked #>   <fct> <int>    <int> <int> #> 1 VF     2211     2211  2211 #> 2 F      1347     1347  1347 #> 3 M       514     1000   514 #> 4 L       259     1000   259  library(ggplot2)  ggplot(circle_example, aes(x, y, color = class)) +   geom_point() +   labs(title = \"Without upsample\")   recipe(class ~ x + y, data = circle_example) %>%   step_upsample(class) %>%   prep() %>%   bake(new_data = NULL) %>%   ggplot(aes(x, y, color = class)) +   geom_jitter(width = 0.1, height = 0.1) +   labs(title = \"With upsample (with jittering)\")"},{"path":"https://themis.tidymodels.org/dev/reference/themis-package.html","id":null,"dir":"Reference","previous_headings":"","what":"themis: Extra Recipes Steps for Dealing with Unbalanced Data — themis-package","title":"themis: Extra Recipes Steps for Dealing with Unbalanced Data — themis-package","text":"dataset uneven number cases class said unbalanced. Many models produce subpar performance unbalanced datasets. dataset can balanced increasing number minority cases using SMOTE 2011 doi:10.48550/arXiv.1106.1813 , BorderlineSMOTE 2005 doi:10.1007/11538059_91  ADASYN 2008 https://ieeexplore.ieee.org/document/4633969. decreasing number majority cases using NearMiss 2003 https://www.site.uottawa.ca/~nat/Workshop2003/jzhang.pdf Tomek link removal 1976 https://ieeexplore.ieee.org/document/4309452.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/themis-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"themis: Extra Recipes Steps for Dealing with Unbalanced Data — themis-package","text":"Maintainer: Emil Hvitfeldt emil.hvitfeldt@posit.co (ORCID) contributors: Posit Software, PBC [copyright holder, funder]","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Tomek's links — tomek","title":"Remove Tomek's links — tomek","text":"Removed observations part tomek links.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Tomek's links — tomek","text":"","code":"tomek(df, var)"},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Tomek's links — tomek","text":"df data.frame tibble. Must 1 factor variable remaining numeric variables. var Character, name variable containing factor variable.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Tomek's links — tomek","text":"data.frame tibble, depending type df.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Tomek's links — tomek","text":"columns used function must numeric missing data.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Remove Tomek's links — tomek","text":"Tomek. Two modifications cnn. IEEE Trans. Syst. Man Cybern., 6:769-772, 1976.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/reference/tomek.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Tomek's links — tomek","text":"","code":"circle_numeric <- circle_example[, c(\"x\", \"y\", \"class\")]  res <- tomek(circle_numeric, var = \"class\")"},{"path":"https://themis.tidymodels.org/dev/reference/tunable_themis.html","id":null,"dir":"Reference","previous_headings":"","what":"tunable methods for themis — tunable.step_adasyn","title":"tunable methods for themis — tunable.step_adasyn","text":"functions define parameters can tuned specific steps. also define recommended objects dials package can used generate new parameter values characteristics.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tunable_themis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"tunable methods for themis — tunable.step_adasyn","text":"","code":"# S3 method for class 'step_adasyn' tunable(x, ...)  # S3 method for class 'step_bsmote' tunable(x, ...)  # S3 method for class 'step_downsample' tunable(x, ...)  # S3 method for class 'step_nearmiss' tunable(x, ...)  # S3 method for class 'step_rose' tunable(x, ...)  # S3 method for class 'step_smote' tunable(x, ...)  # S3 method for class 'step_smotenc' tunable(x, ...)  # S3 method for class 'step_upsample' tunable(x, ...)"},{"path":"https://themis.tidymodels.org/dev/reference/tunable_themis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"tunable methods for themis — tunable.step_adasyn","text":"x recipe step object ... used.","code":""},{"path":"https://themis.tidymodels.org/dev/reference/tunable_themis.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"tunable methods for themis — tunable.step_adasyn","text":"tibble object.","code":""},{"path":[]},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-103","dir":"Changelog","previous_headings":"","what":"themis 1.0.3","title":"themis 1.0.3","text":"CRAN release: 2025-01-22","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"improvements-1-0-3","dir":"Changelog","previous_headings":"","what":"Improvements","title":"themis 1.0.3","text":"Calling ?tidy.step_*() now sends documentation step_*() outcome documented. (#142) Documentation now correctly specifies majority--minority minority--majority. (#143, #110) Documentation tidy methods steps improved describe return value accurately. (#148) messages, warnings errors translated use {cli} package (#153, #155).","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-102","dir":"Changelog","previous_headings":"","what":"themis 1.0.2","title":"themis 1.0.2","text":"CRAN release: 2023-08-14","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"improvements-1-0-2","dir":"Changelog","previous_headings":"","what":"Improvements","title":"themis 1.0.2","text":"Many internal changes improve consistency slight speed increases.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-101","dir":"Changelog","previous_headings":"","what":"themis 1.0.1","title":"themis 1.0.1","text":"CRAN release: 2023-04-14","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"improvements-1-0-1","dir":"Changelog","previous_headings":"","what":"Improvements","title":"themis 1.0.1","text":"Fixed bug upsampling functions error upsampling needed. (#119) Steps tunable arguments now arguments listed documentation.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-100","dir":"Changelog","previous_headings":"","what":"themis 1.0.0","title":"themis 1.0.0","text":"CRAN release: 2022-07-02 Added case weights support step_upsample() step_downsample()","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-022","dir":"Changelog","previous_headings":"","what":"themis 0.2.2","title":"themis 0.2.2","text":"CRAN release: 2022-05-11 tomek() added, rewritten apply multiple classes, removing need unbalanced package, removed dependency.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-021","dir":"Changelog","previous_headings":"","what":"themis 0.2.1","title":"themis 0.2.1","text":"CRAN release: 2022-04-13 bug fixed step_downsample() step_upsample() made steps unable tuned. (#90)","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-020","dir":"Changelog","previous_headings":"","what":"themis 0.2.0","title":"themis 0.2.0","text":"CRAN release: 2022-03-30","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"new-steps-0-2-0","dir":"Changelog","previous_headings":"","what":"New steps","title":"themis 0.2.0","text":"step_smotenc() added implement SMOTENC can handle categorical well numerical values. Thanks @RobertGregg (#82)","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"improvements-and-other-changes-0-2-0","dir":"Changelog","previous_headings":"","what":"Improvements and Other Changes","title":"themis 0.2.0","text":"export nearmiss() functions users. Update examples longer use iris okc data sets. recipe steps now officially support empty selections aligned dplyr packages use tidyselect (#55)","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"bug-fixes-0-2-0","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"themis 0.2.0","text":"step_rose() now correctly allows use characters variables. (#26) step_tomek() now ignore non-predictor variables appropriate. (#51) Fix bug wrong ordering columns caused error smote(). (#76)","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-014","dir":"Changelog","previous_headings":"","what":"themis 0.1.4","title":"themis 0.1.4","text":"CRAN release: 2021-06-12 export smote(), adasyn(), bsmote() functions users.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-013","dir":"Changelog","previous_headings":"","what":"themis 0.1.3","title":"themis 0.1.3","text":"CRAN release: 2020-11-12 Steps use nearest neighbors gives cleaner errors.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-012","dir":"Changelog","previous_headings":"","what":"themis 0.1.2","title":"themis 0.1.2","text":"CRAN release: 2020-08-14 tuneable steps now properly work tune package. Steps now Retain original factor level ordering. (#22) Oversampling steps now ignore non-predictor variables appropriate. (#20)","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-011","dir":"Changelog","previous_headings":"","what":"themis 0.1.1","title":"themis 0.1.1","text":"CRAN release: 2020-05-17 step_smote() now work regardless order classes. Thanks @sebastien-foulle point #14.","code":""},{"path":"https://themis.tidymodels.org/dev/news/index.html","id":"themis-010","dir":"Changelog","previous_headings":"","what":"themis 0.1.0","title":"themis 0.1.0","text":"CRAN release: 2020-01-13 Added NEWS.md file track changes package.","code":""}]
